<!--Loader-->
<div class="overlay" *ngIf="!Loaded"><span class="loader"></span></div>
<!--sidebar-->
<div class="w3-sidebar w3-light-grey w3-bar-block" style="width:25%;">
  <div class="w3-container">
    <div class="w3-row>">
      <a href="javascript:void(0)" (click)="openControlTab('category')">
        <div class="w3-third tablink w3-bottombar w3-hover-light-grey w3-padding"
             [ngClass]="borderColor('category')">Category</div>
      </a>
      <a href="javascript:void(0)" (click)="openControlTab('color')">
        <div class="w3-third tablink w3-bottombar w3-hover-light-grey w3-padding"
             [ngClass]="borderColor('color')">Color</div>
      </a>
      <a href="javascript:void(0)" (click)="openControlTab('storage')">
        <div class="w3-third tablink w3-bottombar w3-hover-light-grey w3-padding"
             [ngClass]="borderColor('storage')">Storage</div>
      </a>
    </div>
  </div>
  <div class="w3-container element-controll-container">
    @switch (selectedControllTab()) {

    @case ('category') {
    <!--Category-->
    <filterComponent [type]="categoryOptionType"
                     [options]="partCategoryOptions"
                     (onDisplayMode)="setDisplayMode($event)"
                     (onCurrentGrouping)="setCurrentGrouping($event)"
                     (onOptionsSent)="partCatergoryFilter($event)"></filterComponent>
    }

    @case ('color') {
    <!--Color-->
    <filterComponent [type]="colorOptionType"
                     [options]="partColorOptions"
                     (onDisplayMode)="setDisplayMode($event)"
                     (onCurrentGrouping)="setCurrentGrouping($event)"
                     (onOptionsSent)="partColorFilter($event)"></filterComponent>
    }
    @case ('storage') {
      <!--Storage-->
      <filterComponent [type]="storageOptionType"
                       [options]="partStorageOptions"
                       (onDisplayMode)="setDisplayMode($event)"
                       (onCurrentGrouping)="setCurrentGrouping($event)"
                       (onOptionsStringSent)="partStorageFilter($event)"></filterComponent>
      }
    }
  </div>
</div>

<!--Body-->

<div class="w3-container element-header">
  <span class="w3-left"><img class="title-img" src="{{legoSet!.set_img_url!}}" /></span>
  <span class="w3-middle"><h1 id="tableLabel">{{legoSet!.name}} Elements</h1></span>

  <p *ngIf="!Loaded"><em>Please enter a set number (normally found on the instruction book, or box).</em></p>
</div>
<div *ngIf="Loaded">
  @if (displayMode === 'TV'){
  <elementTable [elements]="elements"
                [groupColor]="partColorOptions"
                [groupCategory]="partCategoryOptions"
                [groupStorage]="partStorageOptions"
                [currentGrouping]="currentGrouping"
                (itemForStorage)="setStorage($event)"></elementTable>
  } @else if (displayMode === 'CV'){
  <elementCards [elements]="elements"
                [groupColor]="partColorOptions"
                [groupCategory]="partCategoryOptions"
                [groupStorage]="partStorageOptions"
                [currentGrouping]="currentGrouping"
                (itemForStorage)="setStorage($event)"></elementCards>
  }
</div>
<storage *ngIf="storageVisable"
         [elementValue]="elementForStorage"

         (saveStorageEvent)="addedStorage($event)"
         (closeModalEvent)="setStorageHidden($event)">
</storage>
